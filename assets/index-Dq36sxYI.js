import{c as P,a as u,o as d,n as Z,b as w,r as b,d as e,e as p,f as x,g as _,t as r,F as T,h as C,i as f,j as q,w as K,v as G,k as F,l as J,m as X,p as ee,q as N,s as te}from"./vendor-BNmLgrUD.js";import{a as Q}from"./api-ngrFHoWO.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=o(l);fetch(l.href,a)}})();const k=(n,t)=>{const o=n.__vccOpts||n;for(const[s,l]of t)o[s]=l;return o},se={name:"Icon",props:{name:{type:String,required:!0},size:{type:[String,Number],default:"1em"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},setup(n){const t={sunny:'<svg viewBox="0 0 1024 1024"><path d="M512 256c-141.385 0-256 114.615-256 256s114.615 256 256 256 256-114.615 256-256S653.385 256 512 256zM512 704c-106.039 0-192-85.961-192-192s85.961-192 192-192 192 85.961 192 192S618.039 704 512 704z"/><path d="M512 128c17.673 0 32-14.327 32-32V32c0-17.673-14.327-32-32-32s-32 14.327-32 32v64C480 113.673 494.327 128 512 128zM512 896c-17.673 0-32 14.327-32 32v64c0 17.673 14.327 32 32 32s32-14.327 32-32v-64C544 910.327 529.673 896 512 896zM181.019 181.019c-12.497-12.497-32.758-12.497-45.255 0s-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0s12.497-32.758 0-45.255L181.019 181.019zM842.981 842.981c12.497 12.497 32.758 12.497 45.255 0s12.497-32.758 0-45.255l-45.255-45.255c-12.497-12.497-32.758-12.497-45.255 0s-12.497 32.758 0 45.255L842.981 842.981zM128 512c0-17.673-14.327-32-32-32H32c-17.673 0-32 14.327-32 32s14.327 32 32 32h64C113.673 544 128 529.673 128 512zM896 512c0 17.673 14.327 32 32 32h64c17.673 0 32-14.327 32-32s-14.327-32-32-32h-64C910.327 480 896 494.327 896 512zM226.274 797.726c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0l45.255-45.255c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0L226.274 797.726zM797.726 226.274c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0l-45.255 45.255c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0L797.726 226.274z"/></svg>',cloudy:'<svg viewBox="0 0 1024 1024"><path d="M790.4 409.6c-22.4-115.2-121.6-204.8-243.2-204.8-96 0-179.2 54.4-220.8 134.4-6.4-1.6-12.8-1.6-19.2-1.6-70.4 0-128 57.6-128 128 0 3.2 0 6.4 0 9.6C118.4 492.8 64 563.2 64 643.2c0 89.6 72 161.6 161.6 161.6h556.8c89.6 0 161.6-72 161.6-161.6C944 531.2 876.8 435.2 790.4 409.6zM782.4 736H225.6c-51.2 0-92.8-41.6-92.8-92.8s41.6-92.8 92.8-92.8c6.4 0 12.8 0.8 19.2 1.6l32 6.4 12.8-30.4c25.6-60.8 86.4-100 153.6-100 92.8 0 169.6 76.8 169.6 169.6v12.8l12.8 1.6c6.4 0.8 12.8 1.6 19.2 1.6h140.8c51.2 0 92.8 41.6 92.8 92.8S833.6 736 782.4 736z"/></svg>',rainy:'<svg viewBox="0 0 1024 1024"><path d="M790.4 409.6c-22.4-115.2-121.6-204.8-243.2-204.8-96 0-179.2 54.4-220.8 134.4-6.4-1.6-12.8-1.6-19.2-1.6-70.4 0-128 57.6-128 128 0 3.2 0 6.4 0 9.6C118.4 492.8 64 563.2 64 643.2c0 89.6 72 161.6 161.6 161.6h556.8c89.6 0 161.6-72 161.6-161.6C944 531.2 876.8 435.2 790.4 409.6z"/><path d="M320 864c-17.673 0-32 14.327-32 32v64c0 17.673 14.327 32 32 32s32-14.327 32-32v-64C352 878.327 337.673 864 320 864zM448 864c-17.673 0-32 14.327-32 32v64c0 17.673 14.327 32 32 32s32-14.327 32-32v-64C480 878.327 465.673 864 448 864zM576 864c-17.673 0-32 14.327-32 32v64c0 17.673 14.327 32 32 32s32-14.327 32-32v-64C608 878.327 593.673 864 576 864zM704 864c-17.673 0-32 14.327-32 32v64c0 17.673 14.327 32 32 32s32-14.327 32-32v-64C736 878.327 721.673 864 704 864z"/></svg>',typhoon:'<svg viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM512 896c-212.1 0-384-171.9-384-384S299.9 128 512 128s384 171.9 384 384S724.1 896 512 896z"/><path d="M512 256c-141.4 0-256 114.6-256 256s114.6 256 256 256 256-114.6 256-256S653.4 256 512 256zM512 704c-106 0-192-86-192-192s86-192 192-192 192 86 192 192S618 704 512 704z"/><path d="M512 384c-70.7 0-128 57.3-128 128s57.3 128 128 128 128-57.3 128-128S582.7 384 512 384zM512 576c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64S547.3 576 512 576z"/></svg>',wind:'<svg viewBox="0 0 1024 1024"><path d="M128 320h256c35.3 0 64-28.7 64-64s-28.7-64-64-64c-17.7 0-32-14.3-32-32s14.3-32 32-32c70.7 0 128 57.3 128 128s-57.3 128-128 128H128c-17.7 0-32-14.3-32-32s14.3-32 32-32zM192 512h448c35.3 0 64 28.7 64 64s-28.7 64-64 64c-17.7 0-32 14.3-32 32s14.3 32 32 32c70.7 0 128-57.3 128-128s-57.3-128-128-128H192c-17.7 0-32 14.3-32 32s14.3 32 32 32zM128 704h384c35.3 0 64 28.7 64 64s-28.7 64-64 64c-17.7 0-32 14.3-32 32s14.3 32 32 32c70.7 0 128-57.3 128-128s-57.3-128-128-128H128c-17.7 0-32 14.3-32 32s14.3 32 32 32z"/></svg>',temperature:'<svg viewBox="0 0 1024 1024"><path d="M512 64c-70.7 0-128 57.3-128 128v384c-70.7 41.2-128 118.5-128 208 0 141.4 114.6 256 256 256s256-114.6 256-256c0-89.5-57.3-166.8-128-208V192C640 121.3 582.7 64 512 64zM512 960c-106 0-192-86-192-192 0-70.7 38.3-132.3 95.1-165.6L432 592V192c0-35.3 28.7-64 64-64s64 28.7 64 64v400l16.9 10.4C633.7 635.7 672 697.3 672 768 672 874 586 960 512 960z"/><circle cx="512" cy="768" r="96"/></svg>',humidity:'<svg viewBox="0 0 1024 1024"><path d="M512 64c-12.9 0-24.9 7.8-29.9 19.8l-256 512c-3.3 6.7-3.3 14.7 0 21.4C235.1 640.4 262.3 704 352 704h320c89.7 0 116.9-63.6 125.9-86.8 3.3-6.7 3.3-14.7 0-21.4l-256-512C536.9 71.8 524.9 64 512 64zM368 640h-16c-53 0-96-43-96-96 0-17.7-14.3-32-32-32s-32 14.3-32 32c0 88.4 71.6 160 160 160h16c17.7 0 32-14.3 32-32S385.7 640 368 640z"/></svg>',pressure:'<svg viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM512 896c-212.1 0-384-171.9-384-384S299.9 128 512 128s384 171.9 384 384S724.1 896 512 896z"/><path d="M512 320c-17.7 0-32 14.3-32 32v128L352 608c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128c6-6 9.4-14.1 9.4-22.6V352c0-17.7-14.3-32-32-32z"/></svg>',search:'<svg viewBox="0 0 1024 1024"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116 65.6-158.4C296 211.3 352.2 188 412 188s116 23.3 158.4 65.6C612.7 296 636 352.2 636 412s-23.3 116-65.6 158.4z"/></svg>',location:'<svg viewBox="0 0 1024 1024"><path d="M512 96C406.3 96 320 182.3 320 288c0 105.7 86.3 192 192 192s192-86.3 192-192C704 182.3 617.7 96 512 96zM512 416c-70.7 0-128-57.3-128-128s57.3-128 128-128 128 57.3 128 128S582.7 416 512 416z"/><path d="M512 480c-141.4 0-288 86.6-288 192v256h576V672C800 566.6 653.4 480 512 480zM736 864H288V672c0-63.4 100.3-128 224-128s224 64.6 224 128V864z"/></svg>',refresh:'<svg viewBox="0 0 1024 1024"><path d="M512 128c212.1 0 384 171.9 384 384h96c0-265.1-214.9-480-480-480S32 246.9 32 512h96C128 299.9 299.9 128 512 128z"/><path d="M896 448L768 320l128-128v256zM512 896c-212.1 0-384-171.9-384-384H32c0 265.1 214.9 480 480 480s480-214.9 480-480h-96C896 724.1 724.1 896 512 896z"/><path d="M128 576L256 704 128 832V576z"/></svg>',calendar:'<svg viewBox="0 0 1024 1024"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216C912 198.3 897.7 184 880 184zM648 120c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8S643.6 120 648 120zM376 120c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8S371.6 120 376 120zM848 848H176V280h672V848z"/><path d="M416 496H368c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48C424 499.6 420.4 496 416 496zM416 624H368c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48C424 627.6 420.4 624 416 624zM416 752H368c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48C424 755.6 420.4 752 416 752z"/></svg>',warning:'<svg viewBox="0 0 1024 1024"><path d="M512 64L64 864h896L512 64z M512 768c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32S529.7 768 512 768z M544 608c0 17.7-14.3 32-32 32s-32-14.3-32-32V416c0-17.7 14.3-32 32-32s32 14.3 32 32V608z"/></svg>',close:'<svg viewBox="0 0 1024 1024"><path d="M563.8 512l262.5-312.9c4.4-5.2 0.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3.1-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3.1 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"/></svg>',"air-quality":'<svg viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM288 448h448c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32s14.3-32 32-32zM288 576h320c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>'},o=P(()=>`icon icon-${n.name} ${n.className}`.trim()),s=P(()=>({width:typeof n.size=="number"?`${n.size}px`:n.size,height:typeof n.size=="number"?`${n.size}px`:n.size,fill:n.color,display:"inline-block",verticalAlign:"middle"})),l=P(()=>t[n.name]||t.warning);return{iconClass:o,iconStyle:s,iconSvg:l}}},oe=["innerHTML"];function ne(n,t,o,s,l,a){return d(),u("i",{class:w(s.iconClass),style:Z(s.iconStyle),innerHTML:s.iconSvg},null,14,oe)}const A=k(se,[["render",ne],["__scopeId","data-v-f073d558"]]),re={name:"WeatherCard",components:{Icon:A},props:{weather:{type:Object,required:!0},city:{type:Object,required:!0},airQuality:{type:Object,default:null}},setup(){return{getWeatherIcon:a=>({100:"☀️",101:"🌤️",102:"⛅",103:"☁️",104:"☁️",200:"🌬️",201:"💨",202:"🌪️",203:"🌪️",204:"🌪️",205:"🌪️",206:"🌪️",207:"🌪️",208:"🌪️",209:"🌪️",210:"🌪️",211:"🌪️",212:"🌪️",213:"🌪️",300:"🌦️",301:"🌧️",302:"⛈️",303:"⛈️",304:"🌨️",305:"🌦️",306:"🌧️",307:"🌧️",308:"🌧️",309:"🌦️",310:"🌧️",311:"🌧️",312:"🌧️",313:"🌧️",314:"🌦️",315:"🌧️",316:"🌧️",317:"🌧️",318:"🌧️",399:"🌧️",400:"🌨️",401:"❄️",402:"❄️",403:"❄️",404:"🌨️",405:"🌨️",406:"🌨️",407:"🌨️",408:"❄️",409:"❄️",410:"❄️",499:"❄️",500:"🌫️",501:"🌫️",502:"🌫️",503:"💨",504:"💨",507:"💨",508:"💨",509:"🌫️",510:"🌫️",511:"🌫️",512:"🌫️",513:"🌫️",514:"🌫️",515:"🌫️",900:"🌡️",901:"🥶",999:"❓"})[a]||"🌤️",getWeatherIconName:a=>({100:"sunny",101:"cloudy",102:"cloudy",103:"cloudy",104:"cloudy",300:"rainy",301:"rainy",302:"rainy",303:"rainy",304:"rainy",305:"rainy",306:"rainy",307:"rainy",308:"rainy",309:"rainy",310:"rainy",399:"rainy",400:"rainy",401:"rainy",402:"rainy",403:"rainy",404:"rainy",499:"rainy",500:"cloudy",501:"cloudy",502:"cloudy",503:"wind",504:"wind",507:"typhoon",508:"typhoon",999:"warning"})[a]||"sunny",getAQIColor:a=>a<=50?"text-green-600":a<=100?"text-yellow-600":a<=150?"text-orange-600":a<=200?"text-red-600":a<=300?"text-purple-600":"text-red-800",getAQILevel:a=>a<=50?"优":a<=100?"良":a<=150?"轻度污染":a<=200?"中度污染":a<=300?"重度污染":"严重污染",formatTime:a=>new Date(a).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}},ae={class:"weather-card animate-fade-in"},ie={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le={class:"lg:col-span-2"},ce={class:"location-name flex items-center"},de={class:"text-sm font-normal text-gray-500 ml-2"},ue={class:"flex items-center justify-between mb-6"},me={class:"temperature"},ve={class:"weather-desc"},ye={class:"text-right"},ge={class:"weather-icon"},he={class:"text-sm text-gray-600"},fe={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},xe={class:"bg-blue-50 rounded-lg p-3 text-center"},pe={class:"mb-1 flex justify-center"},_e={class:"font-semibold"},be={class:"text-xs text-gray-500"},we={class:"bg-green-50 rounded-lg p-3 text-center"},Te={class:"mb-1 flex justify-center"},Ce={class:"font-semibold"},Se={class:"bg-yellow-50 rounded-lg p-3 text-center"},Ie={class:"mb-1 flex justify-center"},ke={class:"font-semibold"},Me={class:"bg-purple-50 rounded-lg p-3 text-center"},ze={class:"mb-1 flex justify-center"},Le={class:"font-semibold"},De={class:"bg-orange-50 rounded-lg p-3 text-center"},Ae={class:"mb-1 flex justify-center"},$e={class:"font-semibold"},Ne={class:"bg-indigo-50 rounded-lg p-3 text-center"},Pe={class:"mb-1 flex justify-center"},je={class:"font-semibold"},Ve={key:0,class:"lg:col-span-1"},Ye={class:"bg-gradient-to-r from-green-100 to-blue-100 rounded-lg p-4 h-full"},Be={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},Qe={class:"text-center mb-4"},We={class:"text-sm text-gray-600 mt-1"},Oe={class:"space-y-2"},Ee={class:"flex justify-between text-sm"},He={class:"font-medium"},Fe={class:"flex justify-between text-sm"},Ue={class:"font-medium"},qe={class:"flex justify-between text-sm"},Ke={class:"font-medium"},Re={class:"flex justify-between text-sm"},Ze={class:"font-medium"},Ge={class:"flex justify-between text-sm"},Je={class:"font-medium"},Xe={class:"flex justify-between text-sm"},et={class:"font-medium"};function tt(n,t,o,s,l,a){const c=b("Icon");return d(),u("div",ae,[e("div",ie,[e("div",le,[e("div",ce,[x(c,{name:"location",size:"20",color:"#6b7280",class:"mr-2"}),_(" "+r(o.city.name)+" ",1),e("span",de,r(o.city.adm2)+" · "+r(o.city.adm1),1)]),e("div",ue,[e("div",null,[e("div",me,r(o.weather.temp)+"°C",1),e("div",ve,r(o.weather.text)+" · 体感温度 "+r(o.weather.feelsLike)+"°C ",1)]),e("div",ye,[e("div",ge,[x(c,{name:s.getWeatherIconName(o.weather.icon),size:"64",color:"#3b82f6"},null,8,["name"])]),e("div",he,r(s.formatTime(o.weather.obsTime)),1)])]),e("div",fe,[e("div",xe,[e("div",pe,[x(c,{name:"wind",size:"24",color:"#3b82f6"})]),t[0]||(t[0]=e("div",{class:"text-sm text-gray-600"},"风速",-1)),e("div",_e,r(o.weather.windSpeed)+" km/h",1),e("div",be,r(o.weather.windDir),1)]),e("div",we,[e("div",Te,[x(c,{name:"humidity",size:"24",color:"#10b981"})]),t[1]||(t[1]=e("div",{class:"text-sm text-gray-600"},"湿度",-1)),e("div",Ce,r(o.weather.humidity)+"%",1)]),e("div",Se,[e("div",Ie,[x(c,{name:"search",size:"24",color:"#f59e0b"})]),t[2]||(t[2]=e("div",{class:"text-sm text-gray-600"},"能见度",-1)),e("div",ke,r(o.weather.vis)+" km",1)]),e("div",Me,[e("div",ze,[x(c,{name:"pressure",size:"24",color:"#8b5cf6"})]),t[3]||(t[3]=e("div",{class:"text-sm text-gray-600"},"气压",-1)),e("div",Le,r(o.weather.pressure)+" hPa",1)]),e("div",De,[e("div",Ae,[x(c,{name:"cloudy",size:"24",color:"#f97316"})]),t[4]||(t[4]=e("div",{class:"text-sm text-gray-600"},"云量",-1)),e("div",$e,r(o.weather.cloud)+"%",1)]),e("div",Ne,[e("div",Pe,[x(c,{name:"temperature",size:"24",color:"#6366f1"})]),t[5]||(t[5]=e("div",{class:"text-sm text-gray-600"},"露点温度",-1)),e("div",je,r(o.weather.dew)+"°C",1)])])]),o.airQuality?(d(),u("div",Ve,[e("div",Ye,[e("h3",Be,[x(c,{name:"air-quality",size:"20",color:"#1f2937",class:"mr-2"}),t[6]||(t[6]=_(" 空气质量 ",-1))]),e("div",Qe,[e("div",{class:w(["text-3xl font-bold",s.getAQIColor(o.airQuality.aqi)])},r(o.airQuality.aqi),3),e("div",We,r(s.getAQILevel(o.airQuality.aqi)),1)]),e("div",Oe,[e("div",Ee,[t[7]||(t[7]=e("span",null,"PM2.5",-1)),e("span",He,r(o.airQuality.pm2p5)+" μg/m³",1)]),e("div",Fe,[t[8]||(t[8]=e("span",null,"PM10",-1)),e("span",Ue,r(o.airQuality.pm10)+" μg/m³",1)]),e("div",qe,[t[9]||(t[9]=e("span",null,"SO₂",-1)),e("span",Ke,r(o.airQuality.so2)+" μg/m³",1)]),e("div",Re,[t[10]||(t[10]=e("span",null,"NO₂",-1)),e("span",Ze,r(o.airQuality.no2)+" μg/m³",1)]),e("div",Ge,[t[11]||(t[11]=e("span",null,"O₃",-1)),e("span",Je,r(o.airQuality.o3)+" μg/m³",1)]),e("div",Xe,[t[12]||(t[12]=e("span",null,"CO",-1)),e("span",et,r(o.airQuality.co)+" mg/m³",1)])])])])):p("",!0)])])}const st=k(re,[["render",tt],["__scopeId","data-v-75505c3d"]]),ot={name:"ForecastCard",components:{Icon:A},props:{forecast:{type:Array,required:!0}},setup(){return{getWeatherIcon:l=>({100:"☀️",101:"🌤️",102:"⛅",103:"☁️",104:"☁️",300:"🌦️",301:"🌧️",302:"⛈️",303:"⛈️",304:"🌨️",305:"🌦️",306:"🌧️",307:"🌧️",308:"🌧️",309:"🌦️",310:"🌧️",311:"🌧️",312:"🌧️",313:"🌧️",399:"🌧️",400:"🌨️",401:"❄️",402:"❄️",403:"❄️",404:"🌨️",499:"❄️",500:"🌫️",501:"🌫️",502:"🌫️",503:"💨",999:"❓"})[l]||"🌤️",getWeatherIconName:l=>({100:"sunny",101:"cloudy",102:"cloudy",103:"cloudy",104:"cloudy",300:"rainy",301:"rainy",302:"rainy",303:"rainy",304:"rainy",305:"rainy",306:"rainy",307:"rainy",308:"rainy",309:"rainy",310:"rainy",399:"rainy",400:"rainy",401:"rainy",402:"rainy",403:"rainy",404:"rainy",499:"rainy",500:"cloudy",501:"cloudy",502:"cloudy",503:"wind",999:"warning"})[l]||"sunny",formatDate:(l,a)=>{const c=new Date(l),i=new Date;return new Date(i).setDate(i.getDate()+1),a===0?"今天":a===1?"明天":c.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},getUVColor:l=>{const a=parseInt(l);return a<=2?"text-green-600":a<=5?"text-yellow-600":a<=7?"text-orange-600":a<=10?"text-red-600":"text-purple-600"}}}},nt={class:"weather-card animate-slide-up"},rt={class:"text-xl font-semibold text-gray-800 mb-6 flex items-center"},at={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-4"},it={class:"text-sm font-medium text-gray-600 mb-2"},lt={class:"mb-3"},ct={class:"mb-1 flex justify-center"},dt={class:"text-xs text-gray-600"},ut={class:"mb-3"},mt={class:"text-lg font-bold text-gray-800"},vt={class:"text-sm text-gray-500"},yt={class:"space-y-1 text-xs text-gray-600"},gt={class:"flex items-center justify-between"},ht={class:"flex items-center justify-between"},ft={class:"flex items-center justify-between"},xt={class:"mt-2 pt-2 border-t border-gray-100"},pt={class:"flex items-center justify-center space-x-1"};function _t(n,t,o,s,l,a){const c=b("Icon");return d(),u("div",nt,[e("h2",rt,[x(c,{name:"calendar",size:"24",color:"#1f2937",class:"mr-2"}),t[0]||(t[0]=_(" 7天预报 ",-1))]),e("div",at,[(d(!0),u(T,null,C(o.forecast,(i,h)=>(d(),u("div",{key:h,class:"forecast-item bg-gradient-to-b from-blue-50 to-white rounded-lg p-4 text-center hover:shadow-md transition-all duration-200"},[e("div",it,r(s.formatDate(i.fxDate,h)),1),e("div",lt,[e("div",ct,[x(c,{name:s.getWeatherIconName(i.iconDay),size:"32",color:"#3b82f6"},null,8,["name"])]),e("div",dt,r(i.textDay),1)]),e("div",ut,[e("div",mt,r(i.tempMax)+"°",1),e("div",vt,r(i.tempMin)+"°",1)]),e("div",yt,[e("div",gt,[t[1]||(t[1]=e("span",null,"💨",-1)),e("span",null,r(i.windSpeedDay)+"km/h",1)]),e("div",ht,[t[2]||(t[2]=e("span",null,"💧",-1)),e("span",null,r(i.humidity)+"%",1)]),e("div",ft,[t[3]||(t[3]=e("span",null,"🌧️",-1)),e("span",null,r(i.precip)+"mm",1)])]),e("div",xt,[e("div",pt,[t[4]||(t[4]=e("span",{class:"text-xs"},"☀️ UV",-1)),e("span",{class:w(["text-xs font-medium",s.getUVColor(i.uvIndex)])},r(i.uvIndex),3)])])]))),128))]),t[5]||(t[5]=e("div",{class:"sm:hidden text-center mt-4"},[e("p",{class:"text-xs text-gray-500"},"👈 左右滑动查看更多")],-1))])}const bt=k(ot,[["render",_t],["__scopeId","data-v-8c9ce23b"]]),wt={name:"LifeIndexCard",props:{indices:{type:Array,required:!0}},setup(){return{getLifeIndexIcon:l=>({1:"🏃‍♂️",2:"🚗",3:"👕",4:"❄️",5:"🎣",6:"☀️",7:"🚗",8:"😌",9:"💧",10:"🌬️",11:"☂️",12:"💄",13:"🌞",14:"🌡️",15:"🎿",16:"🔥"})[l]||"📊",getLifeIndexName:l=>({1:"运动指数",2:"洗车指数",3:"穿衣指数",4:"感冒指数",5:"钓鱼指数",6:"紫外线指数",7:"旅游指数",8:"舒适度指数",9:"洗车指数",10:"空气扩散",11:"雨伞指数",12:"化妆指数",13:"晾晒指数",14:"中暑指数",15:"滑雪指数",16:"火险指数"})[l]||"生活指数",getLifeIndexColor:l=>{const a=parseInt(l);return a<=1?"text-green-600":a===2?"text-yellow-600":a===3?"text-orange-600":a===4?"text-red-600":"text-purple-600"},getLifeIndexLevelText:l=>{const a=parseInt(l);return{1:"非常适宜",2:"适宜",3:"一般",4:"不适宜",5:"非常不适宜"}[a]||`等级${l}`}}}},Tt={class:"weather-card animate-slide-up"},Ct={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},St={class:"flex items-start justify-between mb-3"},It={class:"flex items-center space-x-2"},kt={class:"text-2xl"},Mt={class:"font-medium text-gray-800"},zt={class:"text-right"},Lt={class:"text-sm text-gray-600 leading-relaxed"};function Dt(n,t,o,s,l,a){return d(),u("div",Tt,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-6 flex items-center"}," 🏃‍♂️ 生活指数 ",-1)),e("div",Ct,[(d(!0),u(T,null,C(o.indices,c=>(d(),u("div",{key:c.type,class:"life-index-item bg-gradient-to-br from-white to-gray-50 rounded-lg p-4 border border-gray-100 hover:shadow-md transition-all duration-200"},[e("div",St,[e("div",It,[e("span",kt,r(s.getLifeIndexIcon(c.type)),1),e("div",null,[e("h3",Mt,r(s.getLifeIndexName(c.type)),1),e("div",{class:w(["text-sm",s.getLifeIndexColor(c.level)])},r(s.getLifeIndexLevelText(c.level)),3)])]),e("div",zt,[e("div",{class:w(["text-lg font-bold",s.getLifeIndexColor(c.level)])},r(c.level),3)])]),e("p",Lt,r(c.text),1)]))),128))])])}const At=k(wt,[["render",Dt],["__scopeId","data-v-7e49622d"]]),$t={name:"PopularCities",props:{cities:{type:Array,required:!0}},emits:["city-select"],setup(n,{emit:t}){return{selectCity:l=>{t("city-select",l)},getCityIcon:l=>({中国:"🇨🇳",美国:"🇺🇸",英国:"🇬🇧",法国:"🇫🇷",德国:"🇩🇪",日本:"🇯🇵",韩国:"🇰🇷",加拿大:"🇨🇦",澳大利亚:"🇦🇺",意大利:"🇮🇹",西班牙:"🇪🇸",荷兰:"🇳🇱",瑞士:"🇨🇭",俄罗斯:"🇷🇺",印度:"🇮🇳",巴西:"🇧🇷",新加坡:"🇸🇬",泰国:"🇹🇭",马来西亚:"🇲🇾",印度尼西亚:"🇮🇩",菲律宾:"🇵🇭",越南:"🇻🇳",土耳其:"🇹🇷",南非:"🇿🇦",埃及:"🇪🇬",阿联酋:"🇦🇪",沙特阿拉伯:"🇸🇦",以色列:"🇮🇱",墨西哥:"🇲🇽",阿根廷:"🇦🇷",智利:"🇨🇱",新西兰:"🇳🇿"})[l]||"🌍"}}},Nt={class:"weather-card animate-fade-in"},Pt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3"},jt=["onClick"],Vt={class:"flex items-center justify-between mb-2"},Yt={class:"font-medium text-gray-800 group-hover:text-blue-600 transition-colors"},Bt={class:"text-lg"},Qt={class:"text-xs text-gray-600"},Wt={class:"mt-1 text-gray-500"};function Ot(n,t,o,s,l,a){return d(),u("div",Nt,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-6 flex items-center"}," 🌍 热门城市 ",-1)),e("div",Pt,[(d(!0),u(T,null,C(o.cities,c=>(d(),u("button",{key:c.id,onClick:i=>s.selectCity(c),class:"city-button bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 rounded-lg p-4 text-left transition-all duration-200 border border-gray-200 hover:border-blue-300 hover:shadow-md group"},[e("div",Vt,[e("h3",Yt,r(c.name),1),e("span",Bt,r(s.getCityIcon(c.country)),1)]),e("div",Qt,[e("div",null,r(c.adm1),1),e("div",Wt,r(c.country),1)])],8,jt))),128))]),t[1]||(t[1]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-sm text-gray-600"}," 点击任意城市查看天气信息 ")],-1))])}const Et=k($t,[["render",Ot],["__scopeId","data-v-0e74fb68"]]),j={apiKey:"db9123dd88164046b314ad1273139249",baseURL:"https://p47fbyuxn3.re.qweatherapi.com",weatherBaseURL:"https://p47fbyuxn3.re.qweatherapi.com",typhoonBaseURL:"https://p47fbyuxn3.re.qweatherapi.com"},V=Q.create({baseURL:j.baseURL,timeout:1e4}),$=Q.create({baseURL:j.weatherBaseURL,timeout:1e4}),Y=Q.create({baseURL:j.typhoonBaseURL,timeout:1e4});function W(n){n.interceptors.request.use(t=>(t.params=t.params||{},t.params.key=j.apiKey,t),t=>Promise.reject(t)),n.interceptors.response.use(t=>{if(t.data&&t.data.code==="200")return t.data;if(t.data&&t.data.code)throw console.error(`API错误 ${t.data.code}:`,t.data.refer||"未知错误"),new Error(`API错误 ${t.data.code}: ${t.data.refer||"请求失败"}`);return t.data},t=>{if(console.error("API请求错误:",t),t.response){const o=t.response.status;if(o===401||o===403)throw new Error("API密钥无效或权限不足，请检查配置");if(o===404)throw new Error("API接口不存在或路径错误");if(o>=500)throw new Error("服务器错误，请稍后重试")}throw t})}W(V);W($);W(Y);async function U(n){try{return(await V.get("/geo/v2/city/lookup",{params:{location:n,adm:"",range:"world"}})).location||[]}catch(t){throw console.error("城市搜索失败:",t),new Error("城市搜索失败，请检查网络连接")}}async function Ht(){try{return(await V.get("/v2/city/top",{params:{range:"world",number:20}})).topCityList||[]}catch(n){return console.error("获取热门城市失败:",n),[]}}async function Ft(n){try{return(await $.get("/v7/weather/now",{params:{location:n}})).now}catch(t){throw console.error("获取实时天气失败:",t),new Error("获取天气数据失败")}}async function Ut(n,t=7){var o;try{return((o=(await $.get("/v7/weather/7d",{params:{location:n}})).daily)==null?void 0:o.slice(0,t))||[]}catch(s){throw console.error("获取天气预报失败:",s),new Error("获取天气预报失败")}}async function qt(n){try{return(await $.get("/v7/indices/1d",{params:{location:n,type:"1,2,3,5,6,8"}})).daily||[]}catch(t){return console.error("获取生活指数失败:",t),[]}}async function Kt(n){try{return(await $.get("/v7/air/now",{params:{location:n}})).now}catch(t){return console.error("获取空气质量失败:",t),null}}async function Rt(){try{return navigator.geolocation?new Promise((n,t)=>{navigator.geolocation.getCurrentPosition(async o=>{const{latitude:s,longitude:l}=o.coords;try{const a=await V.get("/v2/city/lookup",{params:{location:`${l},${s}`}});a.location&&a.location.length>0?n(a.location[0]):t(new Error("无法获取位置信息"))}catch(a){t(a)}},o=>{console.warn("地理位置获取失败，使用默认城市:",o),n({id:"101010100",name:"北京",adm1:"北京",adm2:"北京",country:"中国"})})}):{id:"101010100",name:"北京",adm1:"北京",adm2:"北京",country:"中国"}}catch(n){return console.error("获取位置失败:",n),{id:"101010100",name:"北京",adm1:"北京",adm2:"北京",country:"中国"}}}async function R(n=new Date().getFullYear(),t="NP"){try{return(await Y.get("/v7/tropical/storm-list",{params:{year:n,basin:t}})).storm||[]}catch(o){if(console.error("获取台风列表失败:",o),o.message.includes("404")||o.message.includes("403"))return console.warn("台风API可能需要付费版本，返回演示数据"),Xt(n);throw new Error("获取台风列表失败: "+o.message)}}async function Zt(n){try{return(await Y.get("/v7/tropical/storm-track",{params:{stormid:n}})).track||[]}catch(t){if(console.error("获取台风路径失败:",t),t.message.includes("404")||t.message.includes("403"))return console.warn("台风路径API可能需要付费版本，返回演示数据"),es();throw new Error("获取台风路径失败: "+t.message)}}async function Gt(n){try{return(await Y.get("/v7/tropical/storm-forecast",{params:{stormid:n}})).forecast||[]}catch(t){if(console.error("获取台风预报失败:",t),t.message.includes("404")||t.message.includes("403"))return console.warn("台风预报API可能需要付费版本，返回演示数据"),ts();throw new Error("获取台风预报失败: "+t.message)}}async function Jt(){try{const n=new Date().getFullYear();return(await R(n)).filter(s=>s.isActive==="1"||s.isActive===1)}catch(n){return console.error("获取活跃台风失败:",n),[]}}function Xt(n){return[{id:"2024001",name:"Doksuri",nameLocal:"杜苏芮",level:"STY",isActive:n===new Date().getFullYear()?"1":"0",timeStart:`${n}-07-15T06:00:00Z`,timeEnd:n===new Date().getFullYear()?null:`${n}-07-28T18:00:00Z`},{id:"2024002",name:"Khanun",nameLocal:"卡努",level:"TY",isActive:"0",timeStart:`${n}-07-28T12:00:00Z`,timeEnd:`${n}-08-10T06:00:00Z`},{id:"2024003",name:"Lan",nameLocal:"兰恩",level:"TS",isActive:"0",timeStart:`${n}-08-12T00:00:00Z`,timeEnd:`${n}-08-18T12:00:00Z`}]}function es(n){const t=new Date;return[{time:new Date(t.getTime()-24*60*60*1e3).toISOString(),lat:"25.5",lon:"125.8",windSpeed:"85",pressure:"975",moveSpeed:"15"},{time:new Date(t.getTime()-18*60*60*1e3).toISOString(),lat:"26.2",lon:"124.5",windSpeed:"95",pressure:"965",moveSpeed:"18"},{time:new Date(t.getTime()-12*60*60*1e3).toISOString(),lat:"27.1",lon:"123.2",windSpeed:"105",pressure:"950",moveSpeed:"20"},{time:new Date(t.getTime()-6*60*60*1e3).toISOString(),lat:"28.0",lon:"122.0",windSpeed:"115",pressure:"945",moveSpeed:"22"}]}function ts(n){const t=new Date;return[{fxTime:new Date(t.getTime()+6*60*60*1e3).toISOString(),lat:"29.2",lon:"120.8",windSpeed:"125",pressure:"940",moveSpeed:"25"},{fxTime:new Date(t.getTime()+12*60*60*1e3).toISOString(),lat:"30.5",lon:"119.5",windSpeed:"130",pressure:"935",moveSpeed:"28"},{fxTime:new Date(t.getTime()+24*60*60*1e3).toISOString(),lat:"32.0",lon:"118.0",windSpeed:"110",pressure:"955",moveSpeed:"20"}]}const ss={name:"TyphoonList",components:{Icon:A},emits:["typhoon-select"],setup(n,{emit:t}){const o=f(!1),s=f(""),l=f([]),a=f([]),c=f(new Date().getFullYear()),i=P(()=>{const g=new Date().getFullYear(),v=[];for(let m=g;m>=g-5;m--)v.push(m);return v}),h=async()=>{try{o.value=!0,s.value="";const[g,v]=await Promise.allSettled([R(c.value),Jt()]);g.status==="fulfilled"&&(l.value=g.value),v.status==="fulfilled"&&(a.value=v.value)}catch(g){s.value=g.message||"获取台风数据失败",console.error("台风数据获取失败:",g)}finally{o.value=!1}},S=g=>{t("typhoon-select",g)},M=g=>({TD:"热带低压",TS:"热带风暴",STS:"强热带风暴",TY:"台风",STY:"强台风",SuperTY:"超强台风"})[g]||g||"未知",z=g=>({TD:"text-green-600",TS:"text-yellow-600",STS:"text-orange-600",TY:"text-red-600",STY:"text-red-700",SuperTY:"text-purple-600"})[g]||"text-gray-600",I=g=>g?new Date(g).toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return q(()=>{h()}),{loading:o,error:s,typhoons:l,activeTyphoons:a,selectedYear:c,availableYears:i,fetchTyphoons:h,selectTyphoon:S,getTyphoonLevel:M,getLevelColor:z,formatTime:I}}},os={class:"weather-card animate-fade-in"},ns={class:"flex items-center justify-between mb-6"},rs={class:"text-xl font-semibold text-gray-800 flex items-center"},as={class:"flex items-center space-x-2"},is=["value"],ls=["disabled"],cs={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4"},ds={class:"space-y-2"},us=["onClick"],ms={class:"flex items-center justify-between"},vs={class:"font-medium text-red-800"},ys={class:"text-sm text-red-600 ml-2"},gs={class:"text-sm text-red-600"},hs={key:1,class:"text-center py-8"},fs={key:2,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4"},xs={key:3,class:"space-y-3"},ps={class:"text-sm text-gray-600 mb-4"},_s={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs=["onClick"],ws={class:"flex items-start justify-between mb-3"},Ts={class:"font-semibold text-gray-800 text-lg"},Cs={class:"text-sm text-gray-600"},Ss={class:"text-right"},Is={class:"text-xs text-gray-500"},ks={class:"grid grid-cols-2 gap-4 text-sm"},Ms={class:"font-medium"},zs={class:"font-medium"},Ls={key:0,class:"mt-3 flex items-center"},Ds={key:4,class:"text-center py-8 text-gray-500"};function As(n,t,o,s,l,a){const c=b("Icon");return d(),u("div",os,[e("div",ns,[e("h2",rs,[x(c,{name:"typhoon",size:"24",color:"#1f2937",class:"mr-2"}),t[3]||(t[3]=_(" 台风监测 ",-1))]),e("div",as,[t[4]||(t[4]=e("label",{class:"text-sm text-gray-600"},"年份:",-1)),K(e("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.selectedYear=i),onChange:t[1]||(t[1]=(...i)=>s.fetchTyphoons&&s.fetchTyphoons(...i)),class:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"},[(d(!0),u(T,null,C(s.availableYears,i=>(d(),u("option",{key:i,value:i},r(i),9,is))),128))],544),[[G,s.selectedYear]]),e("button",{onClick:t[2]||(t[2]=(...i)=>s.fetchTyphoons&&s.fetchTyphoons(...i)),disabled:s.loading,class:"px-3 py-1 bg-primary-500 text-white text-sm rounded-md hover:bg-primary-600 disabled:opacity-50 flex items-center"},[x(c,{name:"refresh",size:"16",color:"white",class:"mr-1"}),_(" "+r(s.loading?"加载中...":"刷新"),1)],8,ls)])]),s.activeTyphoons.length>0?(d(),u("div",cs,[t[5]||(t[5]=e("div",{class:"flex items-center mb-2"},[e("span",{class:"text-red-600 text-lg mr-2"},"⚠️"),e("h3",{class:"font-medium text-red-800"},"当前活跃台风")],-1)),e("div",ds,[(d(!0),u(T,null,C(s.activeTyphoons,i=>(d(),u("div",{key:i.id,onClick:h=>s.selectTyphoon(i),class:"cursor-pointer bg-white rounded-md p-3 hover:bg-red-50 transition-colors"},[e("div",ms,[e("div",null,[e("span",vs,r(i.name),1),e("span",ys,"("+r(i.nameLocal)+")",1)]),e("div",gs," 等级: "+r(s.getTyphoonLevel(i.level)),1)])],8,us))),128))])])):p("",!0),s.loading?(d(),u("div",hs,[...t[6]||(t[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1),e("p",{class:"mt-2 text-gray-600"},"正在获取台风数据...",-1)])])):p("",!0),s.error?(d(),u("div",fs," ⚠️ "+r(s.error),1)):p("",!0),s.typhoons.length>0&&!s.loading?(d(),u("div",xs,[e("div",ps," 共找到 "+r(s.typhoons.length)+" 个台风记录 ",1),e("div",_s,[(d(!0),u(T,null,C(s.typhoons,i=>(d(),u("div",{key:i.id,onClick:h=>s.selectTyphoon(i),class:"typhoon-item bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300"},[e("div",ws,[e("div",null,[e("h3",Ts,r(i.name),1),e("p",Cs,r(i.nameLocal),1)]),e("div",Ss,[e("div",{class:w(["text-sm font-medium",s.getLevelColor(i.level)])},r(s.getTyphoonLevel(i.level)),3),e("div",Is,r(i.id),1)])]),e("div",ks,[e("div",null,[t[7]||(t[7]=e("span",{class:"text-gray-600"},"生成时间:",-1)),e("div",Ms,r(s.formatTime(i.timeStart)),1)]),e("div",null,[t[8]||(t[8]=e("span",{class:"text-gray-600"},"结束时间:",-1)),e("div",zs,r(s.formatTime(i.timeEnd)||"进行中"),1)])]),i.isActive==="1"?(d(),u("div",Ls,[...t[9]||(t[9]=[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"},[e("span",{class:"w-2 h-2 bg-red-400 rounded-full mr-1 animate-pulse"}),_(" 活跃中 ")],-1)])])):p("",!0)],8,bs))),128))])])):p("",!0),s.typhoons.length===0&&!s.loading&&!s.error?(d(),u("div",Ds,[t[10]||(t[10]=e("div",{class:"text-4xl mb-4"},"🌊",-1)),e("p",null,r(s.selectedYear)+"年暂无台风记录",1)])):p("",!0)])}const $s=k(ss,[["render",As],["__scopeId","data-v-0c2a195c"]]),Ns={name:"TyphoonTracker",components:{Icon:A},props:{selectedTyphoon:{type:Object,default:null}},emits:["close"],setup(n,{emit:t}){const o=f("track"),s=f(!1),l=f(!1),a=f([]),c=f([]),i=[{key:"track",label:"历史路径"},{key:"forecast",label:"预报路径"}],h=async()=>{if(n.selectedTyphoon)try{s.value=!0;const m=await Zt(n.selectedTyphoon.id);a.value=m}catch(m){console.error("获取台风路径失败:",m),a.value=[]}finally{s.value=!1}},S=async()=>{if(n.selectedTyphoon)try{l.value=!0;const m=await Gt(n.selectedTyphoon.id);c.value=m}catch(m){console.error("获取台风预报失败:",m),c.value=[]}finally{l.value=!1}},M=()=>{t("close")},z=m=>({TD:"热带低压",TS:"热带风暴",STS:"强热带风暴",TY:"台风",STY:"强台风",SuperTY:"超强台风"})[m]||m||"未知",I=m=>({TD:"text-green-600",TS:"text-yellow-600",STS:"text-orange-600",TY:"text-red-600",STY:"text-red-700",SuperTY:"text-purple-600"})[m]||"text-gray-600",g=m=>m?new Date(m).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=m=>{if(!m)return"";const D=new Date,B=new Date(m),y=Math.round((B-D)/(1e3*60*60));return y>0?`${y}小时后`:y<0?`${Math.abs(y)}小时前`:"现在"};return F(()=>n.selectedTyphoon,m=>{m&&(o.value="track",h(),S())},{immediate:!0}),F(o,m=>{m==="track"&&a.value.length===0?h():m==="forecast"&&c.value.length===0&&S()}),{activeTab:o,tabs:i,trackLoading:s,forecastLoading:l,trackData:a,forecastData:c,closeTyphoon:M,getTyphoonLevel:z,getLevelColor:I,formatTime:g,getTimeFromNow:v}}},Ps={key:0,class:"weather-card animate-slide-up"},js={class:"flex items-center justify-between mb-6"},Vs={class:"text-xl font-semibold text-gray-800 flex items-center"},Ys={class:"bg-gradient-to-r from-red-50 to-orange-50 rounded-lg p-4 mb-6"},Bs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qs={class:"space-y-1 text-sm"},Ws={class:"space-y-1 text-sm"},Os={class:"space-y-1 text-sm"},Es={class:"flex space-x-1 mb-6 bg-gray-100 rounded-lg p-1"},Hs=["onClick"],Fs={key:0,class:"space-y-4"},Us={key:0,class:"text-center py-8"},qs={key:1,class:"space-y-3"},Ks={class:"text-sm text-gray-600 mb-4"},Rs={class:"max-h-96 overflow-y-auto space-y-2"},Zs={class:"flex items-center justify-between mb-2"},Gs={class:"font-medium text-gray-800"},Js={class:"text-sm text-gray-600"},Xs={class:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm"},eo={class:"font-medium"},to={class:"font-medium"},so={class:"font-medium"},oo={class:"font-medium"},no={key:2,class:"text-center py-8 text-gray-500"},ro={key:1,class:"space-y-4"},ao={key:0,class:"text-center py-8"},io={key:1,class:"space-y-3"},lo={class:"text-sm text-gray-600 mb-4"},co={class:"space-y-3"},uo={class:"flex items-center justify-between mb-3"},mo={class:"font-medium text-blue-800"},vo={class:"text-sm text-blue-600"},yo={class:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm"},go={class:"font-medium"},ho={class:"font-medium"},fo={class:"font-medium"},xo={class:"font-medium"},po={key:2,class:"text-center py-8 text-gray-500"};function _o(n,t,o,s,l,a){const c=b("Icon");return o.selectedTyphoon?(d(),u("div",Ps,[e("div",js,[e("h2",Vs,[x(c,{name:"typhoon",size:"24",color:"#1f2937",class:"mr-2"}),_(" "+r(o.selectedTyphoon.name)+" 路径追踪 ",1)]),e("button",{onClick:t[0]||(t[0]=(...i)=>s.closeTyphoon&&s.closeTyphoon(...i)),class:"text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors"},[x(c,{name:"close",size:"20",color:"currentColor"})])]),e("div",Ys,[e("div",Bs,[e("div",null,[t[5]||(t[5]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"基本信息",-1)),e("div",Qs,[e("div",null,[t[1]||(t[1]=e("span",{class:"text-gray-600"},"英文名:",-1)),_(" "+r(o.selectedTyphoon.name),1)]),e("div",null,[t[2]||(t[2]=e("span",{class:"text-gray-600"},"中文名:",-1)),_(" "+r(o.selectedTyphoon.nameLocal),1)]),e("div",null,[t[3]||(t[3]=e("span",{class:"text-gray-600"},"编号:",-1)),_(" "+r(o.selectedTyphoon.id),1)]),e("div",null,[t[4]||(t[4]=e("span",{class:"text-gray-600"},"状态:",-1)),e("span",{class:w(o.selectedTyphoon.isActive==="1"?"text-red-600 font-medium":"text-gray-600")},r(o.selectedTyphoon.isActive==="1"?"活跃中":"已结束"),3)])])]),e("div",null,[t[8]||(t[8]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"时间信息",-1)),e("div",Ws,[e("div",null,[t[6]||(t[6]=e("span",{class:"text-gray-600"},"生成:",-1)),_(" "+r(s.formatTime(o.selectedTyphoon.timeStart)),1)]),e("div",null,[t[7]||(t[7]=e("span",{class:"text-gray-600"},"结束:",-1)),_(" "+r(s.formatTime(o.selectedTyphoon.timeEnd)||"进行中"),1)])])]),e("div",null,[t[10]||(t[10]=e("h3",{class:"font-semibold text-gray-800 mb-2"},"强度信息",-1)),e("div",Os,[e("div",null,[t[9]||(t[9]=e("span",{class:"text-gray-600"},"等级:",-1)),e("span",{class:w([s.getLevelColor(o.selectedTyphoon.level),"font-medium"])},r(s.getTyphoonLevel(o.selectedTyphoon.level)),3)])])])])]),e("div",Es,[(d(!0),u(T,null,C(s.tabs,i=>(d(),u("button",{key:i.key,onClick:h=>s.activeTab=i.key,class:w(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors",s.activeTab===i.key?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-800"])},r(i.label),11,Hs))),128))]),s.activeTab==="track"?(d(),u("div",Fs,[s.trackLoading?(d(),u("div",Us,[...t[11]||(t[11]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1),e("p",{class:"mt-2 text-gray-600"},"正在获取路径数据...",-1)])])):s.trackData.length>0?(d(),u("div",qs,[e("div",Ks," 路径点数: "+r(s.trackData.length)+" 个 ",1),e("div",Rs,[(d(!0),u(T,null,C(s.trackData,(i,h)=>(d(),u("div",{key:h,class:"bg-gray-50 rounded-lg p-3 hover:bg-gray-100 transition-colors"},[e("div",Zs,[e("div",Gs,r(s.formatTime(i.time)),1),e("div",Js," 第 "+r(h+1)+" 个点 ",1)]),e("div",Xs,[e("div",null,[t[12]||(t[12]=e("span",{class:"text-gray-600"},"位置:",-1)),e("div",eo,r(i.lat)+"°N, "+r(i.lon)+"°E",1)]),e("div",null,[t[13]||(t[13]=e("span",{class:"text-gray-600"},"风速:",-1)),e("div",to,r(i.windSpeed||"N/A")+" km/h",1)]),e("div",null,[t[14]||(t[14]=e("span",{class:"text-gray-600"},"气压:",-1)),e("div",so,r(i.pressure||"N/A")+" hPa",1)]),e("div",null,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"移速:",-1)),e("div",oo,r(i.moveSpeed||"N/A")+" km/h",1)])])]))),128))])])):(d(),u("div",no,[...t[16]||(t[16]=[e("div",{class:"text-4xl mb-4"},"📍",-1),e("p",null,"暂无路径数据",-1)])]))])):p("",!0),s.activeTab==="forecast"?(d(),u("div",ro,[s.forecastLoading?(d(),u("div",ao,[...t[17]||(t[17]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1),e("p",{class:"mt-2 text-gray-600"},"正在获取预报数据...",-1)])])):s.forecastData.length>0?(d(),u("div",io,[e("div",lo," 预报点数: "+r(s.forecastData.length)+" 个 ",1),e("div",co,[(d(!0),u(T,null,C(s.forecastData,(i,h)=>(d(),u("div",{key:h,class:"bg-blue-50 rounded-lg p-4 border border-blue-200"},[e("div",uo,[e("div",mo,r(s.formatTime(i.fxTime)),1),e("div",vo,r(s.getTimeFromNow(i.fxTime)),1)]),e("div",yo,[e("div",null,[t[18]||(t[18]=e("span",{class:"text-blue-600"},"预测位置:",-1)),e("div",go,r(i.lat)+"°N, "+r(i.lon)+"°E",1)]),e("div",null,[t[19]||(t[19]=e("span",{class:"text-blue-600"},"预测风速:",-1)),e("div",ho,r(i.windSpeed||"N/A")+" km/h",1)]),e("div",null,[t[20]||(t[20]=e("span",{class:"text-blue-600"},"预测气压:",-1)),e("div",fo,r(i.pressure||"N/A")+" hPa",1)]),e("div",null,[t[21]||(t[21]=e("span",{class:"text-blue-600"},"预测移速:",-1)),e("div",xo,r(i.moveSpeed||"N/A")+" km/h",1)])])]))),128))])])):(d(),u("div",po,[...t[22]||(t[22]=[e("div",{class:"text-4xl mb-4"},"🔮",-1),e("p",null,"暂无预报数据",-1)])]))])):p("",!0)])):p("",!0)}const bo=k(Ns,[["render",_o],["__scopeId","data-v-472714f7"]]),wo={name:"ApiStatus"},To={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"};function Co(n,t,o,s,l,a){return d(),u("div",To,[...t[0]||(t[0]=[J('<div class="flex items-start" data-v-a8c459a5><div class="flex-shrink-0" data-v-a8c459a5><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor" data-v-a8c459a5><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-a8c459a5></path></svg></div><div class="ml-3" data-v-a8c459a5><h3 class="text-sm font-medium text-yellow-800" data-v-a8c459a5> API 连接状态 </h3><div class="mt-2 text-sm text-yellow-700" data-v-a8c459a5><p class="mb-2" data-v-a8c459a5> 当前应用使用 <strong data-v-a8c459a5>API KEY</strong> 认证方式连接和风天气API：<code class="bg-yellow-100 px-1 rounded" data-v-a8c459a5>p47fbyuxn3.re.qweatherapi.com</code></p><ul class="list-disc list-inside space-y-1" data-v-a8c459a5><li data-v-a8c459a5>🔑 <strong data-v-a8c459a5>认证方式</strong> - API KEY (简单安全)</li><li data-v-a8c459a5>✅ <strong data-v-a8c459a5>天气预报功能</strong> - 正常可用（城市搜索、实时天气、7天预报、生活指数等）</li><li data-v-a8c459a5>🌪️ <strong data-v-a8c459a5>台风监测功能</strong> - 如API不可用会显示演示数据</li><li data-v-a8c459a5>📡 如遇到连接问题，请检查API密钥配置</li></ul></div><div class="mt-3" data-v-a8c459a5><a href="https://dev.qweather.com/docs/finance/pricing/" target="_blank" class="text-sm text-yellow-800 underline hover:text-yellow-900" data-v-a8c459a5> 查看API定价详情 → </a></div></div></div>',1)])])}const So=k(wo,[["render",Co],["__scopeId","data-v-a8c459a5"]]),Io={name:"App",components:{WeatherCard:st,ForecastCard:bt,LifeIndexCard:At,PopularCities:Et,TyphoonList:$s,TyphoonTracker:bo,ApiStatus:So,Icon:A},setup(){const n=f(!1),t=f(""),o=f(""),s=f([]),l=f(null),a=f(null),c=f([]),i=f([]),h=f(null),S=f([]),M=f(null),z=f("weather");let I=null;const g=()=>{I&&clearTimeout(I),I=setTimeout(async()=>{if(o.value.trim().length>1)try{const y=await U(o.value.trim());s.value=y.slice(0,8)}catch(y){console.error("搜索建议获取失败:",y),s.value=[]}else s.value=[]},300)},v=async()=>{if(o.value.trim())try{n.value=!0,t.value="";const y=await U(o.value.trim());y.length>0?await m(y[0]):t.value="未找到相关城市，请尝试其他关键词"}catch(y){t.value=y.message||"搜索失败，请稍后重试"}finally{n.value=!1,s.value=[]}},m=async y=>{try{n.value=!0,t.value="",l.value=y,o.value=y.name,s.value=[];const[L,O,E,H]=await Promise.allSettled([Ft(y.id),Ut(y.id),qt(y.id),Kt(y.id)]);L.status==="fulfilled"&&(a.value=L.value),O.status==="fulfilled"&&(c.value=O.value),E.status==="fulfilled"&&(i.value=E.value),H.status==="fulfilled"&&(h.value=H.value)}catch(L){t.value=L.message||"获取天气数据失败"}finally{n.value=!1}},D=async()=>{try{n.value=!0;const[y,L]=await Promise.allSettled([Ht(),Rt()]);y.status==="fulfilled"&&(S.value=y.value),L.status==="fulfilled"&&await m(L.value)}catch(y){console.error("初始化失败:",y),t.value="初始化失败，请刷新页面重试"}finally{n.value=!1}},B=y=>{M.value=y};return q(()=>{D()}),{loading:n,error:t,searchQuery:o,searchSuggestions:s,selectedCity:l,currentWeather:a,forecast:c,lifeIndices:i,airQuality:h,popularCities:S,handleSearchInput:g,handleSearch:v,selectCity:m,selectedTyphoon:M,activeView:z,handleTyphoonSelect:B}}},ko={id:"app",class:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600"},Mo={class:"bg-white bg-opacity-10"},zo={class:"container mx-auto px-4 py-4"},Lo={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Do={class:"text-2xl font-bold text-white mb-4 sm:mb-0 flex items-center"},Ao={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},$o={class:"relative"},No={key:0,class:"absolute backdrop-blur-sm top-full left-0 right-0 bg-white rounded-lg shadow-lg mt-1 z-50 max-h-60 overflow-y-auto z-999"},Po=["onClick"],jo={class:"font-medium text-gray-800"},Vo={class:"text-sm text-gray-600"},Yo=["disabled"],Bo={class:"bg-white bg-opacity-10 backdrop-blur-sm border-b border-white border-opacity-20"},Qo={class:"container mx-auto px-4"},Wo={class:"flex space-x-1"},Oo={class:"container mx-auto px-4 py-8"},Eo={key:0,class:"text-center text-white"},Ho={key:1,class:"bg-red-500 bg-opacity-20 border border-red-400 text-white px-4 py-3 rounded-lg mb-6"},Fo={key:2},Uo={key:0,class:"space-y-6"},qo={key:3,class:"space-y-6"};function Ko(n,t,o,s,l,a){const c=b("Icon"),i=b("ApiStatus"),h=b("WeatherCard"),S=b("ForecastCard"),M=b("LifeIndexCard"),z=b("PopularCities"),I=b("TyphoonTracker"),g=b("TyphoonList");return d(),u("div",ko,[e("header",Mo,[e("div",zo,[e("div",Lo,[e("h1",Do,[x(c,{name:"typhoon",size:"32",color:"white",class:"mr-3"}),t[7]||(t[7]=_(" Kaleidoscope's Weather ",-1))]),e("div",Ao,[e("div",$o,[K(e("input",{"onUpdate:modelValue":t[0]||(t[0]=v=>s.searchQuery=v),onKeyup:t[1]||(t[1]=ee((...v)=>s.handleSearch&&s.handleSearch(...v),["enter"])),onInput:t[2]||(t[2]=(...v)=>s.handleSearchInput&&s.handleSearchInput(...v)),type:"text",placeholder:"搜索城市...",class:"search-input w-full sm:w-64 text-gray-700"},null,544),[[X,s.searchQuery]]),s.searchSuggestions.length>0?(d(),u("div",No,[(d(!0),u(T,null,C(s.searchSuggestions,v=>(d(),u("div",{key:v.id,onClick:m=>s.selectCity(v),class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[e("div",jo,r(v.name),1),e("div",Vo,r(v.adm2)+" · "+r(v.adm1)+" · "+r(v.country),1)],8,Po))),128))])):p("",!0)]),e("button",{onClick:t[3]||(t[3]=(...v)=>s.handleSearch&&s.handleSearch(...v)),disabled:s.loading||!s.searchQuery.trim(),class:"search-button disabled:opacity-50 disabled:cursor-not-allowed"},r(s.loading?"搜索中...":"搜索"),9,Yo)])])])]),e("nav",Bo,[e("div",Qo,[e("div",Wo,[e("button",{onClick:t[4]||(t[4]=v=>s.activeView="weather"),class:w(["px-6 py-3 font-medium text-sm transition-colors border-b-2",s.activeView==="weather"?"text-white border-white bg-white bg-opacity-10":"text-white text-opacity-70 border-transparent hover:text-white hover:bg-white hover:bg-opacity-5"])},[x(c,{name:"sunny",size:"20",color:"currentColor",class:"mr-2"}),t[8]||(t[8]=_(" 天气预报 ",-1))],2),e("button",{onClick:t[5]||(t[5]=v=>s.activeView="typhoon"),class:w(["px-6 py-3 font-medium text-sm transition-colors border-b-2",s.activeView==="typhoon"?"text-white border-white bg-white bg-opacity-10":"text-white text-opacity-70 border-transparent hover:text-white hover:bg-white hover:bg-opacity-5"])},[x(c,{name:"typhoon",size:"20",color:"currentColor",class:"mr-2"}),t[9]||(t[9]=_(" 台风监测 ",-1))],2)])])]),e("main",Oo,[x(i),s.loading&&!s.currentWeather?(d(),u("div",Eo,[...t[10]||(t[10]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"},null,-1),e("p",{class:"mt-2"},"正在获取天气数据...",-1)])])):p("",!0),s.error?(d(),u("div",Ho," ⚠️ "+r(s.error),1)):p("",!0),s.activeView==="weather"?(d(),u("div",Fo,[s.currentWeather&&s.selectedCity?(d(),u("div",Uo,[x(h,{weather:s.currentWeather,city:s.selectedCity,"air-quality":s.airQuality},null,8,["weather","city","air-quality"]),s.forecast.length>0?(d(),N(S,{key:0,forecast:s.forecast},null,8,["forecast"])):p("",!0),s.lifeIndices.length>0?(d(),N(M,{key:1,indices:s.lifeIndices},null,8,["indices"])):p("",!0)])):p("",!0),!s.currentWeather&&s.popularCities.length>0?(d(),N(z,{key:1,cities:s.popularCities,onCitySelect:s.selectCity},null,8,["cities","onCitySelect"])):p("",!0)])):p("",!0),s.activeView==="typhoon"?(d(),u("div",qo,[s.selectedTyphoon?(d(),N(I,{key:0,"selected-typhoon":s.selectedTyphoon,onClose:t[6]||(t[6]=v=>s.selectedTyphoon=null)},null,8,["selected-typhoon"])):p("",!0),x(g,{onTyphoonSelect:s.handleTyphoonSelect},null,8,["onTyphoonSelect"])])):p("",!0)]),t[11]||(t[11]=e("footer",{class:"bg-white bg-opacity-10 backdrop-blur-sm text-white text-center py-4 mt-8"},[e("p",{class:"text-sm"},[_(" 天气数据由 "),e("a",{href:"https://www.qweather.com/",target:"_blank",class:"underline hover:text-blue-200"}," 和风天气 "),_(" 提供 | 台风数据来源于官方监测 ")]),e("p",{class:"text-xs text-white text-opacity-70 mt-1"}," Kaleidoscope's Weather - 让世界天气如万花筒般绚烂 ")],-1))])}const Ro=k(Io,[["render",Ko],["__scopeId","data-v-1a3820a5"]]);te(Ro).mount("#app");
